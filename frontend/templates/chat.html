{% extends "base.html" %}
{% block title %}Chat 24/7{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="/static/css/chat.css" />
{% endblock %}

{% block content %}
<div class="chat-layout">

  <!-- â”€â”€ Sidebar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <aside class="chat-sidebar">
    <div class="sidebar-header">
      <h2>ğŸ­ Carnavalix Chat</h2>
      <span class="online-badge" id="onlineBadge">â— En lÃ­nea</span>
    </div>

    <div class="chat-rooms">
      <h3>Salas</h3>
      <button class="room-btn active" data-sala="general">ğŸ’¬ General</button>
      <button class="room-btn" data-sala="coac2025">ğŸ† COAC 2025</button>
      <button class="room-btn" data-sala="letras">ğŸ“œ Letras</button>
      <button class="room-btn" data-sala="callejeras">ğŸª Callejeras</button>
    </div>

    <div class="chat-bot-info">
      <h3>Bot Carnaval ğŸ¤–</h3>
      <p>El bot manda letras y vÃ­deos aleatorios cada 5 minutos. Â¡Nunca sabes lo que llega!</p>
    </div>

    <!-- Formulario de nombre -->
    <div class="chat-identidad">
      <label for="inputNombre">Tu nombre</label>
      <input type="text" id="inputNombre" maxlength="30" placeholder="AnÃ³nimo" />
    </div>
  </aside>

  <!-- â”€â”€ Ãrea principal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div class="chat-main">
    <div class="chat-header">
      <span class="chat-sala-nombre" id="chatSalaNombre"># general</span>
      <span class="chat-info">Chat en tiempo real Â· Bot activo 24/7</span>
    </div>

    <div class="chat-mensajes" id="chatMensajes">
      <!-- Mensajes renderizados dinÃ¡micamente -->
      <div class="chat-welcome">
        <p>Â¡Bienvenido al chat del Carnaval! ğŸ­</p>
        <p>AquÃ­ puedes hablar sobre el COAC, pedir letras y compartir tus agrupaciones favoritas.</p>
      </div>
    </div>

    <form class="chat-input-area" id="chatForm" autocomplete="off">
      <input
        type="text"
        id="chatInput"
        placeholder="Escribe un mensaje... (Intro para enviar)"
        maxlength="500"
        autocomplete="off"
      />
      <button type="submit" class="btn-enviar" aria-label="Enviar">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
      </button>
    </form>
  </div>

</div>

<!-- â”€â”€ Plantillas de mensajes â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<template id="msgUserTemplate">
  <div class="mensaje mensaje-user">
    <div class="msg-header">
      <span class="msg-autor"></span>
      <span class="msg-hora"></span>
    </div>
    <div class="msg-contenido"></div>
  </div>
</template>

<template id="msgBotTemplate">
  <div class="mensaje mensaje-bot">
    <div class="msg-header">
      <span class="msg-autor">ğŸ­ Bot Carnaval</span>
      <span class="msg-hora"></span>
    </div>
    <div class="msg-contenido"></div>
  </div>
</template>

<template id="msgSistemaTemplate">
  <div class="mensaje mensaje-sistema">
    <span class="msg-contenido"></span>
  </div>
</template>

{% endblock %}

{% block extra_js %}
<script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
<script src="/static/js/chat.js"></script>
{% endblock %}
