{% extends "base.html" %}
{% block title %}Live 24/7{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="/static/css/live.css"/>
{% endblock %}

{% block content %}
<div class="live-layout">

  <!-- Player principal -->
  <div class="live-player-wrap">
    <div class="live-header">
      <span class="live-badge">ğŸ”´ EN DIRECTO</span>
      <span class="live-canal" id="liveCanal">ONDACADIZCARNAVAL</span>
    </div>
    <div class="live-embed-wrap" id="liveEmbedWrap">
      <iframe
        id="livePlayer"
        src=""
        allow="autoplay; accelerometer; encrypted-media; gyroscope; picture-in-picture; fullscreen"
        allowfullscreen
        frameborder="0"
        title="Canal Live 24/7"
      ></iframe>
      <div class="live-loading" id="liveLoading">
        <div class="spinner"></div>
        <p>Cargando canal...</p>
      </div>
    </div>
    <div class="live-info">
      <h2 class="live-titulo" id="liveTituloActual">Cargando...</h2>
      <div class="live-meta">
        <span id="liveViewers">ğŸ‘¥ 1 espectador</span>
        <span class="live-sep">Â·</span>
        <button class="btn-live-next" id="btnLiveSiguientePub" style="display:none">â­ Siguiente (admin)</button>
      </div>
    </div>
  </div>

  <!-- Chat lateral -->
  <div class="live-chat">
    <div class="chat-header">
      <span>ğŸ’¬ Chat del Carnaval</span>
      <span class="chat-sala">#live</span>
    </div>

    <div class="chat-mensajes" id="chatMensajes">
      <!-- mensajes dinÃ¡micos -->
    </div>

    <div class="chat-input-wrap" id="chatInputWrap">
      <div class="chat-usuario-info" id="chatUsuarioInfo" style="display:none">
        <span id="chatAvatarEmoji"></span>
        <span id="chatNombreVisible"></span>
      </div>
      <div class="chat-anonimo-info" id="chatAnonimoInfo">
        <a href="/login" class="chat-login-link">Inicia sesiÃ³n</a> para chatear con tu nombre Â·
        <input type="text" id="chatNombreAnonimo" placeholder="Tu nombre (anÃ³nimo)" maxlength="30" style="max-width:130px"/>
      </div>
      <div class="chat-input-row">
        <input type="text" id="chatInput" placeholder="Escribe un mensaje..." maxlength="300" autocomplete="off"/>
        <button class="btn-chat-send" id="btnChatSend">â¤</button>
      </div>
    </div>
  </div>

</div>
{% endblock %}

{% block extra_js %}
<!-- Socket.IO client: necesario para el chat del live -->
<script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
<script src="/static/js/live.js"></script>
{% endblock %}
